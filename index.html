<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Club Pets & Jack</title>
    <style>
        /* --- ESTILOS VISUALES --- */
        :root { --primary: #2c3e50; --classic: #3498db; --elite: #f1c40f; --bg: #f4f6f7; --text: #333; }
        body { font-family: 'Helvetica', 'Arial', sans-serif; margin: 0; padding: 0; background-color: var(--bg); color: var(--text); }
        
        header { background: var(--primary); color: white; padding: 1.5rem 1rem; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        header h1 { margin: 0; font-size: 1.5rem; }
        header p { margin: 5px 0 0; opacity: 0.9; font-size: 0.9rem; }

        .container { max-width: 600px; margin: 0 auto; padding: 20px; }
        
        .card { background: white; padding: 20px; margin-bottom: 20px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); position: relative; }
        
        h2 { font-size: 1.3rem; margin-top: 0; color: var(--primary); }
        h3 { font-size: 1.1rem; margin-top: 0; margin-bottom: 10px; }
        ul { padding-left: 20px; color: #555; margin-bottom: 20px; }
        li { margin-bottom: 5px; }

        /* BOTONES */
        .btn { 
            display: block; 
            width: 100%; 
            padding: 15px 0; 
            border: none; 
            border-radius: 8px; 
            font-weight: bold; 
            text-align: center; 
            text-decoration: none; 
            font-size: 16px; 
            cursor: pointer; 
            margin-top: 10px; 
            transition: transform 0.1s; 
            box-sizing: border-box; 
            -webkit-appearance: none; /* Fix para iPhone */
        }
        .btn:active { transform: scale(0.98); }
        
        .btn-classic { background-color: var(--classic); color: white; box-shadow: 0 4px 6px rgba(52, 152, 219, 0.2); }
        .btn-elite { background-color: var(--elite); color: #333; box-shadow: 0 4px 6px rgba(241, 196, 15, 0.3); }
        .btn-whatsapp { background-color: #25D366; color: white; }
        .btn-insta { background: linear-gradient(45deg, #405de6, #5851db, #833ab4, #c13584, #e1306c, #fd1d1d); color: white; }
        .btn-outline { background: transparent; border: 2px solid #ccc; color: #666; }

        /* BARRA DE PROGRESO */
        .progress-container { background: #eee; height: 20px; border-radius: 10px; overflow: hidden; margin: 10px 0; position: relative; }
        .progress-fill { height: 100%; border-radius: 10px; transition: width 1s ease-in-out; width: 0%; display: flex; align-items: center; justify-content: flex-end; }
        .progress-text { position: absolute; width: 100%; text-align: center; line-height: 20px; font-size: 0.8rem; font-weight: bold; color: #555; }

        .hidden { display: none !important; }
    </style>
</head>
<body>

<script>
    // 1. N칔MERO NUEVO DE WHATSAPP
    const WHATSAPP_TIENDA = "56993525112"; 

    // 2. LINK NUEVO DE INSTAGRAM
    const LINK_INSTAGRAM = "https://www.instagram.com/pets.jackk/";

    // 3. BASE DE DATOS DE CLIENTES (Ejemplo)
    const BASE_DE_DATOS = {
        'cliente_01': 2,
        'cliente_02': 5,
        'vip_juan': 9
        // Agrega m치s aqu칤...
    };
</script>

<div id="view-public" class="hidden">
    <header>
        <h1>Pets & Jack</h1>
        <p>Elige tu membres칤a o escanea tu tarjeta</p>
    </header>
    
    <div class="container">
        <div class="card" style="border-top: 5px solid var(--classic);">
            <h2 style="color: var(--classic);">游댯 Membres칤a Classic</h2>
            <ul>
                <li>5% Descuento Permanente</li>
                <li>Regalo cada 10 sacos</li>
                <li>Acceso anticipado 48h</li>
            </ul>
            <a href="#" onclick="conectarWhatsApp('Hola, quiero informaci칩n para COMPRAR o REPONER la Tarjeta CLASSIC.')" class="btn btn-classic">
                Comprar / Reponer Classic
            </a>
        </div>

        <div class="card" style="border-top: 5px solid var(--elite);">
            <h2 style="color: #b7950b;">游녬 Membres칤a 칄lite</h2>
            <ul>
                <li>10% Descuento Permanente</li>
                <li>Sorteos Mensuales</li>
                <li>3 Reposiciones Gratis</li>
            </ul>
            <a href="#" onclick="conectarWhatsApp('Hola, quiero informaci칩n para COMPRAR o REPONER la Tarjeta 칄LITE.')" class="btn btn-elite">
                Comprar / Reponer 칄lite
            </a>
        </div>

        <div style="text-align: center; margin-top: 30px; color: #999; font-size: 0.9rem;">
            <p>쯏a tienes tu tarjeta? <br>Acerca tu celular a ella.</p>
        </div>
    </div>
</div>

<div id="view-classic" class="hidden">
    <header style="background: var(--classic);">
        <h1>Socio Classic 游냤</h1>
        <p>ID: <span id="display-id-classic">...</span></p>
    </header>
    <div class="container">
        <div class="card">
            <h3>游꾸 Tu Progreso de Sacos</h3>
            <p id="texto-sacos-classic">Cargando...</p>
            <div class="progress-container">
                <span class="progress-text" id="label-barra-classic">0/10</span>
                <div class="progress-fill" id="barra-classic" style="background: var(--classic);"></div>
            </div>
            <p id="mensaje-falta-classic" style="font-size:0.8rem; color:#999; text-align: center;">...</p>

            <a href="#" onclick="registrarSaco('Classic')" class="btn btn-classic">游 Registrar Nuevo Saco</a>
        </div>
        
        <div class="card">
            <span style="background: var(--classic); color: white; padding: 4px 10px; border-radius: 15px; font-size: 0.8rem;">ACTIVO</span>
            <h3>5% Descuento en Tienda</h3>
            <p>Muestra esta pantalla en caja para validar tu descuento.</p>
        </div>

        <button onclick="cerrarSesion()" class="btn btn-outline">Cerrar Sesi칩n</button>
    </div>
</div>

<div id="view-elite" class="hidden">
    <header style="background: var(--elite); color: #333;">
        <h1>Socio 칄lite 游녬</h1>
        <p>ID: <span id="display-id-elite">...</span></p>
    </header>
    <div class="container">
        <div class="card" style="background: linear-gradient(to right, #fff, #fffdf5);">
            <h3>游꾸 Progreso de Sacos</h3>
            <p id="texto-sacos-elite">Cargando...</p>
            <div class="progress-container">
                <span class="progress-text" id="label-barra-elite">0/10</span>
                <div class="progress-fill" id="barra-elite" style="background: var(--elite);"></div>
            </div>
             <a href="#" onclick="registrarSaco('Elite')" class="btn btn-elite">游 Registrar Nuevo Saco</a>
        </div>

        <div class="card">
            <span style="background: var(--elite); color: #333; padding: 4px 10px; border-radius: 15px; font-size: 0.8rem;">VIP ACTIVO</span>
            <h3>10% Descuento Permanente</h3>
            <p>V치lido en todos los productos y servicios.</p>
        </div>

        <div class="card">
            <h3>游꿀 Sorteos Mensuales</h3>
            <p>Participas autom치ticamente.</p>
            <a href="#" onclick="window.open(LINK_INSTAGRAM, '_blank')" class="btn btn-insta">游닞 Ver Premios en Instagram</a>
        </div>
        
        <div class="card">
            <h3>游눱 Reposici칩n Gratuita</h3>
            <p>Tienes 3 reposiciones al a침o sin costo.</p>
            <a href="#" onclick="conectarWhatsApp('Hola, soy Socio Elite y necesito reponer mi tarjeta gratis.')" class="btn btn-outline">Solicitar Reposici칩n</a>
        </div>

        <button onclick="cerrarSesion()" class="btn btn-outline">Cerrar Sesi칩n</button>
    </div>
</div>

<script>
    let currentId = "Invitado";

    window.onload = function() {
        const params = new URLSearchParams(window.location.search);
        const tipo = params.get('socio');
        const idUsuario = params.get('id');

        if(idUsuario) {
            currentId = idUsuario;
            document.getElementById('display-id-classic').innerText = currentId;
            document.getElementById('display-id-elite').innerText = currentId;
        }

        // Cargar datos
        let cantidad = 0;
        if (idUsuario && BASE_DE_DATOS[idUsuario] !== undefined) {
            cantidad = BASE_DE_DATOS[idUsuario];
        }
        actualizarGraficos(cantidad);

        // Mostrar vista correcta
        document.getElementById('view-public').classList.add('hidden');
        document.getElementById('view-classic').classList.add('hidden');
        document.getElementById('view-elite').classList.add('hidden');

        if (tipo === 'classic') {
            document.getElementById('view-classic').classList.remove('hidden');
        } else if (tipo === 'elite') {
            document.getElementById('view-elite').classList.remove('hidden');
        } else {
            document.getElementById('view-public').classList.remove('hidden');
        }
    };

    function actualizarGraficos(n) {
        let porcentaje = (n / 10) * 100;
        if (porcentaje > 100) porcentaje = 100;
        let faltan = 10 - n;
        let mensaje = faltan <= 0 ? "춰Premio disponible!" : `Faltan ${faltan} sacos para tu premio.`;

        // Classic Updates
        document.getElementById('texto-sacos-classic').innerHTML = `Llevas <strong>${n} de 10</strong> sacos.`;
        document.getElementById('label-barra-classic').innerText = `${n}/10`;
        document.getElementById('barra-classic').style.width = `${porcentaje}%`;
        document.getElementById('mensaje-falta-classic').innerText = mensaje;

        // Elite Updates
        document.getElementById('texto-sacos-elite').innerHTML = `Llevas <strong>${n} de 10</strong> sacos.`;
        document.getElementById('label-barra-elite').innerText = `${n}/10`;
        document.getElementById('barra-elite').style.width = `${porcentaje}%`;
    }

    // Funci칩n para conectar a WhatsApp
    function conectarWhatsApp(mensaje) {
        let numero = WHATSAPP_TIENDA.replace(/\D/g,''); // Limpia el n칰mero de s칤mbolos
        let url = `https://wa.me/${numero}?text=${encodeURIComponent(mensaje)}`;
        window.open(url, '_blank');
    }

    // Funci칩n espec칤fica para el bot칩n de Sacos
    function registrarSaco(tipoSocio) {
        let msg = `Hola, soy Socio ${tipoSocio} (ID: ${currentId}). Quiero registrar la compra de un saco y sumar puntos.`;
        conectarWhatsApp(msg);
    }

    function cerrarSesion() {
        window.location.href = window.location.pathname;
    }
</script>

</body>
</html>
